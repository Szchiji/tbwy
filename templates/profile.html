<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ - Matrix Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0a0a12; color: #f1f1f1; }
        .glass-panel { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); }
        .navbar-bottom { background: linear-gradient(180deg, #0f0f1a 0%, #1a1a2e 100%); }
        .nav-item-active { color: #60a5fa; border-top: 2px solid #60a5fa; }
        .nav-item { color: #9ca3af; border-top: 2px solid transparent; }
    </style>
</head>
<body class="min-h-screen pb-20">
    <div class="max-w-xl mx-auto px-4">
        <header class="py-6">
            <h1 class="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">æˆ‘çš„</h1>
        </header>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="grid grid-cols-3 gap-4 mb-8">
            <div class="glass-panel p-4 rounded-2xl text-center">
                <div class="text-2xl font-bold text-blue-400" id="likeCount">0</div>
                <div class="text-xs text-gray-500">ç‚¹èµ</div>
            </div>
            <div class="glass-panel p-4 rounded-2xl text-center">
                <div class="text-2xl font-bold text-pink-400">{{ favorites|length }}</div>
                <div class="text-xs text-gray-500">æ”¶è—</div>
            </div>
            <div class="glass-panel p-4 rounded-2xl text-center">
                <div class="text-2xl font-bold text-green-400" id="blacklistCount">0</div>
                <div class="text-xs text-gray-500">æ‹‰é»‘</div>
            </div>
        </div>

        <!-- æˆ‘çš„æ”¶è— -->
        <div class="mb-8">
            <h2 class="text-lg font-bold text-white mb-4">æˆ‘çš„æ”¶è—</h2>
            {% if favorites %}
            <div class="space-y-3">
                {% for post in favorites %}
                <a href="/post/{{ post.id }}?user_id={{ user_id }}" class="glass-panel p-4 rounded-xl block hover:bg-white/5 transition">
                    <div class="text-sm text-gray-300 line-clamp-2">{{ post.text or 'æŸ¥çœ‹è¯¦æƒ…' }}</div>
                    <div class="text-xs text-gray-500 mt-2">{{ post.date }}</div>
                </a>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-gray-500 text-center py-8">æš‚æ— æ”¶è—</div>
            {% endif %}
        </div>

        <!-- æˆ‘çš„è¯„è®º -->
        <div class="mb-8">
            <h2 class="text-lg font-bold text-white mb-4">æˆ‘çš„è¯„è®º</h2>
            {% if comments %}
            <div class="space-y-3">
                {% for comment in comments %}
                <a href="/post/{{ comment.post_id }}?user_id={{ user_id }}" class="glass-panel p-4 rounded-xl block hover:bg-white/5 transition">
                    <div class="text-sm text-gray-300 mb-2">{{ comment.content }}</div>
                    <div class="text-xs text-gray-500">åœ¨å¸–å­: {{ comment.post_text[:30] if comment.post_text else 'æŸ¥çœ‹è¯¦æƒ…' }}...</div>
                    <div class="text-xs text-gray-500 mt-1">{{ comment.date }}</div>
                </a>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-gray-500 text-center py-8">æš‚æ— è¯„è®º</div>
            {% endif %}
        </div>

        <!-- æ¸…é™¤æ•°æ® -->
        <div class="glass-panel p-4 rounded-2xl">
            <button onclick="clearAllData()" class="text-red-400 text-sm">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æœ¬åœ°æ•°æ®</button>
        </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆª -->
    <nav class="navbar-bottom fixed bottom-0 left-0 right-0 border-t border-white/10 shadow-2xl">
        <div class="flex justify-around items-center h-16">
            <a href="/?user_id={{ user_id }}" class="nav-item flex-1 flex flex-col items-center justify-center h-full transition hover:bg-white/5">
                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                <span class="text-xs">é¦–é¡µ</span>
            </a>
            <a href="/favorites?user_id={{ user_id }}" class="nav-item flex-1 flex flex-col items-center justify-center h-full transition hover:bg-white/5">
                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                </svg>
                <span class="text-xs">æ”¶è—</span>
            </a>
            <a href="/profile?user_id={{ user_id }}" class="nav-item-active flex-1 flex flex-col items-center justify-center h-full transition">
                <svg class="w-6 h-6 mb-1" fill="currentColor" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
                <span class="text-xs font-bold">æˆ‘çš„</span>
            </a>
        </div>
    </nav>

    <script>
        // ä» localStorage è·å–ç»Ÿè®¡
        const liked = JSON.parse(localStorage.getItem('m_liked') || '[]');
        const blacklisted = JSON.parse(localStorage.getItem('m_blacklisted') || '[]');
        document.getElementById('likeCount').textContent = liked.length;
        document.getElementById('blacklistCount').textContent = blacklisted.length;
        
        function clearAllData() {
            if(!confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æœ¬åœ°æ•°æ®å—ï¼ŸåŒ…æ‹¬ç‚¹èµã€æ”¶è—ã€æ‹‰é»‘è®°å½•ã€‚')) return;
            localStorage.removeItem('m_liked');
            localStorage.removeItem('m_blacklisted');
            localStorage.removeItem('m_favorites');
            alert('æ•°æ®å·²æ¸…é™¤');
            location.reload();
        }
    </script>
</body>
</html>
